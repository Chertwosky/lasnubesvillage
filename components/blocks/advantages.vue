<template>
    <section class="advantages">
        <SectionBadge
            class="advantages__badge"
            gradient="linear-gradient(90deg,#12304a 0%, #071529 100%)"
            align="center"
        >
            –ù–∞—à–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
        </SectionBadge>

        <div class="advantages__slider">
            <button class="advantages__arrow" type="button" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞" @click="scroll(-1)">
                <span>‚Äπ</span>
            </button>

            <div class="advantages__viewport" ref="viewport">
                <div class="advantages__track" ref="track">
                    <article v-for="perk in perks" :key="perk.title" class="advantages__card">
                        <div class="advantages__icon" :style="{ backgroundColor: perk.color }">
                            <span>{{ perk.icon }}</span>
                        </div>
                        <h3 class="advantages__title">{{ perk.title }}</h3>
                        <p class="advantages__text">{{ perk.description }}</p>
                    </article>
                </div>
            </div>

            <button class="advantages__arrow" type="button" aria-label="–°–ª–µ–¥—É—é—â–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞" @click="scroll(1)">
                <span>‚Ä∫</span>
            </button>
        </div>
    </section>
</template>

<script setup>
    import { ref } from 'vue'
    import SectionBadge from '@/components/ui/SectionBadge.vue'

    const viewport = ref(null)
    const track = ref(null)

    const perks = [
        {
            title: '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –¥–≤–æ—Ä–∏–∫',
            description: '–ü–∞—Ç–∏–æ —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º –≤—Ö–æ–¥–æ–º, –±–µ—Å–µ–¥–∫–∞ —Å –º–∏–Ω–∏-–∫—É—Ö–Ω–µ–π –∏ –º–∞–Ω–≥–∞–ª—å–Ω–∞—è –∑–æ–Ω–∞.',
            icon: 'üè°',
            color: '#e8dbc8'
        },
        {
            title: '–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –±–∞–Ω–Ω—ã–π —á–∞–Ω',
            description: '–ë–∞–Ω–Ω—ã–π —á–∞–Ω —É —Ç–µ—Ä—Ä–∞—Å—ã –≤–∞—à–µ–≥–æ –¥–æ–º–∞.',
            icon: '‚ô®Ô∏è',
            color: '#d0e8e4'
        },
        {
            title: '–ü–∞–Ω–æ—Ä–∞–º–Ω—ã–µ –≤–∏–¥—ã –Ω–∞ –≥–æ—Ä—ã',
            description: '–ü–∞–Ω–æ—Ä–∞–º–Ω–æ–µ –æ—Å—Ç–µ–∫–ª–µ–Ω–∏–µ —Å –≤–∏–¥–æ–º –Ω–∞ –≥–æ—Ä—ã –∏–∑ –ª—é–±–æ–π —Ç–æ—á–∫–∏ –¥–æ–º–∞.',
            icon: 'üåÑ',
            color: '#f2dfd7'
        },
        {
            title: '–í–µ—Ä—Ö–Ω—è—è –≤–∏–¥–æ–≤–∞—è —Ç–µ—Ä—Ä–∞—Å–∞',
            description: '–ü—Ä–æ—Å—Ç–æ—Ä–Ω–∞—è —Ç–µ—Ä—Ä–∞—Å–∞ –Ω–∞ –≤—Ç–æ—Ä–æ–º —ç—Ç–∞–∂–µ —Å —É–¥–æ–±–Ω—ã–º–∏ –∫—Ä–µ—Å–ª–∞–º–∏ –∏ –æ–±–∑–æ—Ä–Ω—ã–º –≤–∏–¥–æ–º.',
            icon: 'ü™ë',
            color: '#dce5f4'
        },
        {
            title: '–†—É—Å—Å–∫–∞—è –±–∞–Ω—è –Ω–∞ –¥—Ä–æ–≤–∞—Ö',
            description: '–¢–æ–ø–∏—Ç—Å—è –¥—Ä–æ–≤–∞–º–∏. –ü–∞—Ä–Ω–∞—è –Ω–∞ 6 —á–µ–ª–æ–≤–µ–∫, –¥—É—à, –æ–±–ª–∏–≤–æ—á–Ω–æ–µ –≤–µ–¥—Ä–æ.',
            icon: 'üßñ‚Äç‚ôÇÔ∏è',
            color: '#f7f0de'
        },
        {
            title: '–ë—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞',
            description: '–ü–ª–∏—Ç–∞, –¥—É—Ö–æ–≤–æ–π —à–∫–∞—Ñ, –º–∏–∫—Ä–æ–≤–æ–ª–Ω–æ–≤–∫–∞, —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫, –ø–æ—Å—É–¥–æ–º–æ–µ—á–Ω–∞—è –º–∞—à–∏–Ω–∞, —á–∞–π–Ω–∏–∫.',
            icon: 'üç≥',
            color: '#e2d9ff'
        },
        {
            title: '–ü—Ä–∏—è—Ç–Ω—ã–µ –º–µ–ª–æ—á–∏',
            description: '2 smart TV, Wi-Fi, –≥–æ—Ä–Ω—ã–π —á–∞–π, —Å–∞—Ö–∞—Ä, —Å–æ–ª—å, –º–∞—Å–ª–æ, –ø—Ä–∏–ø—Ä–∞–≤—ã, –Ω–∞–±–æ—Ä—ã –ª–∏—á–Ω–æ–π –≥–∏–≥–∏–µ–Ω—ã, –±–µ–ª–æ—Å–Ω–µ–∂–Ω—ã–µ –ø–æ–ª–æ—Ç–µ–Ω—Ü–∞, –∫–∞–ø—Å—É–ª—ã –¥–ª—è –ø–æ—Å—É–¥–æ–º–æ–π–∫–∏, —Å—Ç–æ–ª, —Å–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫—Ä–∞—Å–∏–≤–æ–π –ø–æ—Å—É–¥–æ–π, —à–∞–º–ø—É—Ä–∞, —Ä–µ—à–µ—Ç–∫–∞, –∫–∞–∑–∞–Ω.',
            icon: 'üéÅ',
            color: '#f3e6ff'
        },
        {
            title: '–õ–æ–∫–∞—Ü–∏—è',
            description: '600 –º–µ—Ç—Ä–æ–≤ –¥–æ –∫—Ä–∞—Å–∏–≤–µ–π—à–µ–≥–æ –∫–∞–Ω—å–æ–Ω–∞ –ú–∏—à–æ–∫–æ.',
            icon: 'üìç',
            color: '#d8f0ff'
        }
    ]

    const scroll = (direction) => {
        const container = viewport.value
        const sliderTrack = track.value

        if (!container || !sliderTrack) return

        const firstCard = sliderTrack.querySelector('.advantages__card')
        const styles = getComputedStyle(sliderTrack)
        const gap = Number.parseFloat(styles.columnGap || styles.gap || '0')
        const step = (firstCard?.getBoundingClientRect().width || container.clientWidth) + gap

        sliderTrack.scrollBy({
            left: direction * step,
            behavior: 'smooth'
        })
    }
</script>

<style scoped>
.advantages {
    margin: 90px auto 0;
    max-width: var(--container-width);
    padding: 0 var(--container-padding);
}

.advantages__badge {
    margin-bottom: 36px;
    --badge-min-w: 270px;
}

.advantages__slider {
    position: relative;
    display: grid;
    grid-template-columns: auto 1fr auto;
    align-items: center;
    gap: 16px;
}

.advantages__viewport {
    overflow: hidden;
}

.advantages__track {
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: minmax(360px, 1fr);
    gap: 18px;
    padding: 6px 4px 12px;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    scrollbar-width: none;
}

.advantages__track::-webkit-scrollbar {
    display: none;
}

.advantages__card {
    background: var(--white-color);
    border-radius: var(--border-radius-container);
    padding: 24px;
    display: grid;
    grid-template-rows: auto auto 1fr;
    gap: 12px;
    scroll-snap-align: start;
}

.advantages__icon {
    width: 56px;
    height: 56px;
    border-radius: 16px;
    display: grid;
    place-items: center;
    font-size: 26px;
    color: #3f3533;
}

.advantages__title {
    margin: 0;
    font-size: 20px;
    line-height: 1.3;
    font-family: var(--font-secondary);
    color: var(--black-color);
}

.advantages__text {
    margin: 0;
    font-size: var(--fontsize-medium);
    line-height: 1.4;
    color: #3f3533;
    font-family: var(--font-main);
}

.advantages__arrow {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    border: none;
    background: #3f3533;
    color: #e8dbc8;
    display: grid;
    place-items: center;
    cursor: pointer;
    box-shadow: 0 10px 28px rgba(7, 21, 41, 0.2);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.advantages__arrow:hover {
    transform: translateY(-2px);
    box-shadow: 0 14px 34px rgba(7, 21, 41, 0.28);
}

.advantages__arrow span {
    font-size: 22px;
    line-height: 1;
}

@media (max-width: 1024px) {
    .advantages {
        margin-top: 64px;
    }

    .advantages__slider {
        grid-template-columns: 1fr;
    }

    .advantages__arrow {
        order: 3;
        width: 40px;
        height: 40px;
    }

    .advantages__slider > .advantages__arrow:first-of-type {
        justify-self: start;
    }

    .advantages__slider > .advantages__arrow:last-of-type {
        justify-self: end;
    }

    .advantages__track {
        grid-auto-columns: minmax(320px, 1fr);
    }
}

@media (max-width: 640px) {
    .advantages {
        margin-top: 48px;
    }

    .advantages__badge {
        margin-bottom: 24px;
    }

    .advantages__slider {
        padding: 0 36px;
    }

    .advantages__track {
        grid-auto-columns: minmax(230px, 1fr);
        gap: 14px;
    }

    .advantages__card {
        padding: 20px;
        gap: 10px;
    }

    .advantages__title {
        font-size: 20px;
    }

    .advantages__text {
        font-size: var(--fontsize-secondary);
    }

    .advantages__arrow {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 38px;
        height: 38px;
    }

    .advantages__arrow:first-of-type {
        left: 0;
        transform: translateY(-50%) rotate(0deg);
    }

    .advantages__arrow:last-of-type {
        right: 0;
    }

    .advantages__arrow:hover {
        transform: translateY(-50%);
    }
}
</style>
